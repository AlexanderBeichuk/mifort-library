<div class="books-list_filters" [formGroup]="filterForm">
  <app-book-search class="books-list_search"></app-book-search>
  <ng-container *ngIf="isAdmin">
    <mat-checkbox class="books-list_filters-checkbox" formControlName="overdue">Просроченные</mat-checkbox>
    <mat-checkbox class="books-list_filters-checkbox" formControlName="ending">Подходит срок</mat-checkbox>
    <mat-checkbox class="books-list_filters-checkbox" formControlName="popular">Популярные</mat-checkbox>
  </ng-container>
</div>
<div class="books-list">
  <mat-accordion displayMode="flat" multi="true">
    <mat-expansion-panel expanded="true" *ngIf="(updates | booksFilter : filterForm.value : searchFields).length">
      <mat-expansion-panel-header>
        <h3 class="books-list_section-title mat-h3">Обновления</h3>
      </mat-expansion-panel-header>
      <app-book-card
        *ngFor="let book of updates | booksFilter : filterForm.value : searchFields; let odd = odd"
        [book]="book"
        [ngClass]="{'odd-item': odd}"></app-book-card>
    </mat-expansion-panel>
    <mat-expansion-panel expanded="true" *ngIf="(takenByMe | booksFilter : filterForm.value : searchFields).length">
      <mat-expansion-panel-header>
        <h3 class="books-list_section-title mat-h3">У меня</h3>
      </mat-expansion-panel-header>
      <app-book-card
        *ngFor="let book of takenByMe | booksFilter : filterForm.value : searchFields; let odd = odd"
        [book]="book"
        [ngClass]="{'odd-item': odd}"></app-book-card>
    </mat-expansion-panel>
    <mat-expansion-panel expanded="true" *ngIf="(myWishlist | booksFilter : filterForm.value : searchFields).length">
      <mat-expansion-panel-header>
        <h3 class="books-list_section-title mat-h3">Избранное</h3>
      </mat-expansion-panel-header>
      <app-book-card
        *ngFor="let book of myWishlist | booksFilter : filterForm.value : searchFields; let odd = odd"
        [book]="book"
        [ngClass]="{'odd-item': odd}"></app-book-card>
    </mat-expansion-panel>
    <mat-expansion-panel expanded="true" *ngIf="(allBooks | booksFilter : filterForm.value : searchFields).length">
      <mat-expansion-panel-header>
        <h3 class="books-list_section-title mat-h3">Все книги</h3>
      </mat-expansion-panel-header>
      <app-book-card
        *ngFor="let book of allBooks | booksFilter : filterForm.value : searchFields; let odd = odd"
        [book]="book"
        [ngClass]="{'odd-item': odd}"></app-book-card>
    </mat-expansion-panel>
  </mat-accordion>
</div>
<button mat-fab (click)="askForBook()" color="accent" class="books-list_add-button">
  <i class="material-icons"> add</i>
</button>
